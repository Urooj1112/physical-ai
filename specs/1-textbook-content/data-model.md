# Data Model: Physical AI & Humanoid Robotics Textbook Content

## Entities from Feature Specification

### Chapter
-   **Description**: A primary section of the textbook.
-   **Attributes**:
    -   `title`: String (e.g., "Introduction to Physical AI & Embodied Intelligence")
    -   `content`: Markdown text (the main body of the chapter)
    -   `code_examples`: List of strings (ROS 2 code snippets)
    -   `diagrams`: List of strings (ASCII or Mermaid diagram definitions)
    -   `slug`: String (URL-friendly identifier for Docusaurus navigation)
-   **Relationships**: Contains multiple Subchapters.

### Subchapter
-   **Description**: A subsection within a chapter.
-   **Attributes**:
    -   `title`: String
    -   `content`: Markdown text
    -   `code_examples`: List of strings
    -   `diagrams`: List of strings
    -   `slug`: String
    -   `parent_chapter_slug`: String (links to parent Chapter)
-   **Relationships**: Belongs to one Chapter.

### Code Snippet
-   **Description**: An example of code (e.g., ROS 2) embedded within the chapter content.
-   **Attributes**:
    -   `language`: String (e.g., "ros2", "python", "cpp")
    -   `code`: String (the actual code content)
    -   `caption`: String (optional, explanation of the code)
-   **Relationships**: Embedded within Chapter or Subchapter content.

### Diagram
-   **Description**: A visual representation (ASCII or Mermaid) embedded within the chapter content.
-   **Attributes**:
    -   `type`: String ("ascii" or "mermaid")
    -   `definition`: String (the diagram definition)
    -   `caption`: String (optional, explanation of the diagram)
-   **Relationships**: Embedded within Chapter or Subchapter content.

### User (Student/Developer)
-   **Description**: Interacts with the textbook to read content, learn, and potentially contribute.
-   **Attributes**:
    -   `user_id`: Unique identifier
    -   `reading_progress`: Map<Chapter/Subchapter Slug, Progress Percentage> (for personalization)
    -   `preferences`: JSON (e.g., preferred language, learning style for personalization)
    -   `language_preference`: String (e.g., "en", "ur")
-   **Relationships**: Interacts with Chapters/Subchapters, generates RAG Chatbot queries.

## RAG Chatbot Specific Data

### Document Embedding
-   **Description**: Vector representation of textbook content for RAG.
-   **Attributes**:
    -   `embedding`: Vector (numerical representation of text)
    -   `text_chunk`: String (original text segment)
    -   `source_chapter_slug`: String
    -   `source_subchapter_slug`: String (if applicable)
    -   `chunk_id`: Unique identifier for the chunk
-   **Storage**: Qdrant Vector Database.

### User Query
-   **Description**: A question posed by the user to the RAG chatbot.
-   **Attributes**:
    -   `query_text`: String
    -   `user_id`: String (optional, for personalization)
    -   `context_chapter_slug`: String (optional, for "Ask about this chapter" mode)
    -   `timestamp`: Datetime
-   **Storage**: Potentially logged in Neon Postgres for analytics.

### Chatbot Response
-   **Description**: The answer generated by the RAG chatbot.
-   **Attributes**:
    -   `response_text`: String
    -   `source_document_chunks`: List<chunk_id> (references to retrieved chunks)
    -   `timestamp`: Datetime
-   **Storage**: Potentially logged in Neon Postgres for analytics.